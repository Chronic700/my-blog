{{- define "main" }}

<header class="page-header">
  <h1>{{ .Title }}</h1>
  {{- if .Description }}
  <div class="post-description">{{ .Description }}</div>
  {{- end }}
</header>

{{- if .Content }}
<div class="post-content">
  {{- .Content }}
</div>
{{- end }}

{{- $pages := where .Site.RegularPages "Type" "in" .Site.Params.mainSections }}
{{- $pages = where $pages "Params.private" "!=" true }}

{{- if .IsHome }}
{{- $pages = where $pages "Params.private" "!=" true }}
{{- end }}

{{- if (len $pages) }}
<ul class="post-list">
{{- range $pages }}
  {{- if not .Params.private }}
  <li>
    <article>
      <header class="entry-header">
        <h2>
          <a href="{{ .Permalink }}">{{ .Title }}</a>
        </h2>
      </header>
      {{- if .Description }}
      <section class="entry-content">
        <p>{{ .Description }}</p>
      </section>
      {{- end }}
      <footer class="entry-footer">
        <span>{{ .Date.Format "January 2, 2006" }}</span>
        {{- if .Params.topics }}
        <span> Â· Topics: {{ delimit .Params.topics ", " }}</span>
        {{- end }}
      </footer>
    </article>
  </li>
  {{- end }}
{{- end }}
</ul>
{{- end }}

{{- end }}
